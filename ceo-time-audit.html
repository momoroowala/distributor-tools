<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEO Time Audit | What's Eating Your Week?</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        :root{--bg:#0a0a0f;--card:#12121a;--cell:#1a1a25;--border:#2a2a3a;--text:#f1f5f9;--muted:#94a3b8;--dim:#64748b}
        body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;background:var(--bg);color:var(--text);min-height:100vh;line-height:1.5}
        .container{max-width:960px;margin:0 auto;padding:1.5rem}
        header{text-align:center;margin-bottom:1.5rem;padding-top:1rem}
        .badge{display:inline-block;background:#f59e0b;color:#000;padding:0.2rem 0.6rem;border-radius:9999px;font-size:0.7rem;font-weight:700;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.75rem}
        h1{font-size:2rem;font-weight:700;margin-bottom:0.5rem;background:linear-gradient(135deg,var(--text),#f59e0b);-webkit-background-clip:text;-webkit-text-fill-color:transparent}
        .subtitle{color:var(--muted);font-size:1rem;max-width:500px;margin:0 auto}
        .section{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:1.5rem;margin-bottom:1.5rem}
        .section h2{font-size:1.1rem;margin-bottom:0.25rem}
        .section .hint{font-size:0.8rem;color:var(--dim);margin-bottom:1rem}
        /* Palette */
        .palette{display:flex;flex-wrap:wrap;gap:0.5rem;margin-bottom:1rem}
        .palette-item{display:flex;align-items:center;gap:0.4rem;padding:0.4rem 0.75rem;border-radius:0.5rem;cursor:pointer;border:2px solid transparent;font-size:0.75rem;font-weight:600;transition:all 0.15s;user-select:none}
        .palette-item:hover{transform:scale(1.03)}
        .palette-item.active{border-color:#fff;box-shadow:0 0 10px rgba(255,255,255,0.2)}
        .palette-item .dot{width:10px;height:10px;border-radius:3px;flex-shrink:0}
        /* Calendar Grid */
        .cal-wrapper{overflow-x:auto;margin-bottom:1rem}
        .cal{display:grid;grid-template-columns:60px repeat(5,1fr);gap:1px;background:var(--border);border-radius:0.5rem;overflow:hidden;user-select:none}
        .cal-header{background:#1e1e2e;padding:0.5rem;text-align:center;font-size:0.75rem;font-weight:600;color:var(--muted)}
        .cal-time{background:#1e1e2e;padding:0.35rem 0.5rem;font-size:0.7rem;color:var(--dim);display:flex;align-items:center}
        .cal-cell{background:var(--cell);padding:0.3rem;min-height:28px;cursor:pointer;transition:background 0.1s;position:relative;display:flex;align-items:center;justify-content:center;font-size:0.6rem;font-weight:600;color:rgba(255,255,255,0.8)}
        .cal-cell:hover{filter:brightness(1.3)}
        /* Stats Bar */
        .stats-bar{display:flex;gap:1rem;flex-wrap:wrap;margin-top:1rem}
        .stat{flex:1;min-width:120px;background:var(--cell);border-radius:0.5rem;padding:0.75rem;text-align:center}
        .stat .num{font-size:1.4rem;font-weight:700}
        .stat .label{font-size:0.7rem;color:var(--dim)}
        .time-bar{height:24px;border-radius:0.25rem;overflow:hidden;display:flex;margin-top:1rem}
        .time-bar .seg{display:flex;align-items:center;justify-content:center;font-size:0.65rem;font-weight:600;color:#fff;transition:width 0.3s}
        /* Ad Hoc Section */
        .adhoc-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:0.75rem}
        .adhoc-item{background:var(--cell);border-radius:0.5rem;padding:0.75rem}
        .adhoc-item label{display:block;font-size:0.85rem;margin-bottom:0.25rem}
        .adhoc-item .hint{font-size:0.7rem;color:var(--dim);margin-bottom:0.4rem}
        .adhoc-item input{width:100%;padding:0.5rem;background:var(--bg);border:1px solid var(--border);border-radius:0.35rem;color:var(--text);font-size:0.9rem}
        .adhoc-item input:focus{outline:none;border-color:#f59e0b}
        .btn{width:100%;padding:0.9rem;border-radius:0.5rem;font-weight:600;font-size:1rem;cursor:pointer;border:none;margin-top:1rem;transition:all 0.2s}
        .btn-primary{background:#f59e0b;color:#000}
        .btn-primary:hover{background:#fbbf24}
        /* Results */
        .results-page{display:none}.results-page.active{display:block;animation:fadeIn 0.4s ease}
        @keyframes fadeIn{from{opacity:0;transform:translateY(15px)}to{opacity:1;transform:translateY(0)}}
        .impact-card{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:2rem;text-align:center;margin-bottom:1.5rem}
        .impact-number{font-size:3rem;font-weight:700;line-height:1}
        .impact-label{color:var(--dim);font-size:0.9rem;margin-top:0.25rem}
        .impact-context{color:var(--muted);margin-top:0.75rem;font-size:0.9rem}
        .reclaim-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:0.75rem;margin-top:1.25rem}
        .reclaim-item{background:var(--cell);border-radius:0.5rem;padding:1rem;text-align:center}
        .reclaim-item .number{font-size:1.3rem;font-weight:700;color:#22c55e}
        .reclaim-item .desc{font-size:0.7rem;color:var(--dim);margin-top:0.2rem}
        .before-after{background:var(--card);border:1px solid var(--border);border-radius:1rem;padding:1.5rem;margin-bottom:1.5rem}
        .before-after h3{font-size:1rem;margin-bottom:1rem}
        .ba-row{display:flex;gap:1rem}
        .ba-col{flex:1;background:var(--cell);border-radius:0.75rem;padding:1rem}
        .ba-col h4{font-size:0.8rem;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.5rem}
        .ba-col.before h4{color:#ef4444}.ba-col.after h4{color:#22c55e}
        .ba-stat{display:flex;justify-content:space-between;padding:0.3rem 0;font-size:0.8rem;border-bottom:1px solid var(--border)}
        .ba-stat:last-child{border-bottom:none}
        .ba-stat .val{font-weight:600}
        .download-section{background:linear-gradient(135deg,rgba(245,158,11,0.1),var(--card));border:2px solid #f59e0b;border-radius:1rem;padding:2rem;text-align:center;margin-bottom:1.5rem}
        .download-section h3{font-size:1.3rem;margin-bottom:0.4rem}
        .download-section>p{color:var(--muted);margin-bottom:1.25rem;font-size:0.9rem}
        .email-form{display:flex;gap:0.75rem;max-width:420px;margin:0 auto;flex-wrap:wrap}
        .email-form input[type="email"]{flex:1;min-width:200px;padding:0.75rem;background:var(--bg);border:1px solid var(--border);border-radius:0.5rem;color:var(--text);font-size:0.95rem}
        .email-form input:focus{outline:none;border-color:#f59e0b}
        .email-form .btn{width:auto;min-width:160px;margin-top:0}
        .download-complete{display:none;color:#22c55e;padding:0.75rem;font-size:0.95rem}
        .download-complete.active{display:block}
        footer{text-align:center;padding:1.5rem;color:var(--dim);font-size:0.8rem}
        footer a{color:#f59e0b;text-decoration:none}
        @media(max-width:700px){.container{padding:1rem}h1{font-size:1.5rem}.reclaim-grid{grid-template-columns:repeat(2,1fr)}.adhoc-grid{grid-template-columns:1fr}.ba-row{flex-direction:column}.cal{font-size:0.6rem}}
    </style>
</head>
<body>
<div class="container">
    <header>
        <span class="badge">Free Tool</span>
        <h1>What's Eating Your Week?</h1>
        <p class="subtitle">Paint your actual calendar. See what a machine should be doing instead of you.</p>
    </header>

    <div id="inputPage">
        <div class="section">
            <h2>Step 1: Paint Your Typical Week</h2>
            <p class="hint">Select a category below, then click or drag on the calendar to fill in your schedule. 9 AM to 9 PM, Monday through Friday.</p>

            <div class="palette" id="palette"></div>

            <div class="cal-wrapper">
                <div class="cal" id="calendar"></div>
            </div>

            <div class="time-bar" id="liveBar"></div>
            <div class="stats-bar" id="liveStats"></div>
        </div>

        <div class="section">
            <h2>Step 2: What Else Eats Your Time?</h2>
            <p class="hint">These tasks don't always show on a calendar but consume real hours every week.</p>
            <div class="adhoc-grid">
                <div class="adhoc-item"><label>Evening email/texts (after 9 PM)</label><div class="hint">Checking phone, responding to messages</div><input type="number" id="adhoc_evening" min="0" max="20" step="0.5" value="0" oninput="updateStats()"></div>
                <div class="adhoc-item"><label>Weekend work</label><div class="hint">Catching up, checking in, emergencies</div><input type="number" id="adhoc_weekend" min="0" max="20" step="0.5" value="0" oninput="updateStats()"></div>
                <div class="adhoc-item"><label>Unplanned interruptions</label><div class="hint">Walk-ins, surprise calls, "got a minute?"</div><input type="number" id="adhoc_interruptions" min="0" max="20" step="0.5" value="0" oninput="updateStats()"></div>
                <div class="adhoc-item"><label>Worrying/thinking about work</label><div class="hint">Laying in bed thinking about problems</div><input type="number" id="adhoc_worry" min="0" max="20" step="0.5" value="0" oninput="updateStats()"></div>
            </div>
        </div>

        <button class="btn btn-primary" onclick="analyze()">üîç Analyze My Week</button>
    </div>

    <div class="results-page" id="resultsPage">
        <div class="impact-card">
            <div class="impact-number" style="color:#ef4444" id="automatableHours">0</div>
            <div class="impact-label">hours per week you spend on tasks a machine could handle</div>
            <div class="impact-context" id="impactContext"></div>
        </div>

        <div class="impact-card" style="border-color:#22c55e">
            <div class="impact-number" style="color:#22c55e" id="reclaimedDays">0</div>
            <div class="impact-label">days per year you could reclaim</div>
            <div class="reclaim-grid" id="reclaimGrid"></div>
        </div>

        <div class="before-after">
            <h3>Your Week: Before vs After Automation</h3>
            <div class="ba-row">
                <div class="ba-col before" id="beforeCol"><h4>üî¥ Now</h4></div>
                <div class="ba-col after" id="afterCol"><h4>üü¢ After</h4></div>
            </div>
        </div>

        <div class="download-section">
            <h3>üìÑ Get Your Time Recovery Plan</h3>
            <p>Detailed PDF with automation recommendations for each time-waster and your "life reclaimed" projection.</p>
            <form class="email-form" id="emailForm" onsubmit="handleDownload(event)">
                <input type="email" id="userEmail" placeholder="Work email" required>
                <button type="submit" class="btn btn-primary">üì• Download PDF</button>
            </form>
            <div class="download-complete" id="downloadComplete">‚úì Report downloaded!</div>
        </div>
    </div>
    <footer><p>Built by <a href="#">Mo Roowala</a> | AI Automation for Distributors</p></footer>
</div>
<script>
const { jsPDF } = window.jspdf;

const categories = [
    { id:'strategy', name:'Strategy & Growth', short:'Strategy', color:'#22c55e', type:'strategic', save:0 },
    { id:'customers', name:'Customer Calls/Meetings', short:'Customers', color:'#06b6d4', type:'strategic', save:0 },
    { id:'pricing', name:'Pricing & Quotes', short:'Pricing', color:'#ef4444', type:'automatable', save:0.75 },
    { id:'orders', name:'Order Issues', short:'Orders', color:'#f97316', type:'automatable', save:0.65 },
    { id:'inventory', name:'Inventory/Purchasing', short:'Inventory', color:'#f43f5e', type:'automatable', save:0.6 },
    { id:'reports', name:'Reports & Data', short:'Reports', color:'#e11d48', type:'automatable', save:0.8 },
    { id:'admin', name:'Admin & Paperwork', short:'Admin', color:'#dc2626', type:'automatable', save:0.7 },
    { id:'fires', name:'Putting Out Fires', short:'Fires', color:'#b91c1c', type:'automatable', save:0.45 },
    { id:'email', name:'Email & Comms', short:'Email', color:'#eab308', type:'delegatable', save:0.35 },
    { id:'meetings', name:'Internal Meetings', short:'Meetings', color:'#a3a3a3', type:'delegatable', save:0.25 },
    { id:'people', name:'People Management', short:'People', color:'#8b5cf6', type:'delegatable', save:0.15 },
    { id:'break', name:'Break / Personal', short:'Break', color:'#374151', type:'neutral', save:0 }
];

const days = ['Mon','Tue','Wed','Thu','Fri'];
const hours = [];
for(let h=9;h<=20;h++) hours.push(h<12?h+'am':h===12?'12pm':(h-12)+'pm');

let selectedCat = 0;
let grid = {}; // key: "day-hour" -> categoryIndex
let isDragging = false;

function init() {
    // Palette
    const pal = document.getElementById('palette');
    pal.innerHTML = categories.map((c,i) => `
        <div class="palette-item ${i===0?'active':''}" onclick="selectCat(${i})" id="pal_${i}" style="background:${c.color}22">
            <div class="dot" style="background:${c.color}"></div>
            <span>${c.name}</span>
        </div>
    `).join('');

    // Calendar
    const cal = document.getElementById('calendar');
    let html = '<div class="cal-header"></div>';
    days.forEach(d => html += `<div class="cal-header">${d}</div>`);

    hours.forEach((h,hi) => {
        html += `<div class="cal-time">${h}</div>`;
        days.forEach((d,di) => {
            const key = `${di}-${hi}`;
            html += `<div class="cal-cell" id="c_${key}" data-key="${key}" 
                onmousedown="startPaint('${key}')" 
                onmouseenter="paint('${key}')"
                ontouchstart="startPaint('${key}')"
                ontouchmove="touchPaint(event)"></div>`;
        });
    });
    cal.innerHTML = html;
    document.addEventListener('mouseup', () => isDragging = false);
    document.addEventListener('touchend', () => isDragging = false);
    updateStats();
}

function selectCat(i) {
    selectedCat = i;
    document.querySelectorAll('.palette-item').forEach(p => p.classList.remove('active'));
    document.getElementById('pal_'+i).classList.add('active');
}

function startPaint(key) {
    isDragging = true;
    toggleCell(key);
}

function paint(key) {
    if(isDragging) toggleCell(key);
}

function touchPaint(e) {
    if(!isDragging) return;
    e.preventDefault();
    const touch = e.touches[0];
    const el = document.elementFromPoint(touch.clientX, touch.clientY);
    if(el && el.dataset && el.dataset.key) toggleCell(el.dataset.key);
}

function toggleCell(key) {
    const cell = document.getElementById('c_'+key);
    if(!cell) return;
    const cat = categories[selectedCat];
    if(grid[key] === selectedCat) {
        delete grid[key];
        cell.style.background = '';
        cell.textContent = '';
    } else {
        grid[key] = selectedCat;
        cell.style.background = cat.color + 'cc';
        cell.textContent = cat.short;
    }
    updateStats();
}

function updateStats() {
    const counts = {};
    categories.forEach((c,i) => counts[i] = 0);
    Object.values(grid).forEach(ci => counts[ci]++);

    const adhocEvening = parseFloat(document.getElementById('adhoc_evening')?.value) || 0;
    const adhocWeekend = parseFloat(document.getElementById('adhoc_weekend')?.value) || 0;
    const adhocInterruptions = parseFloat(document.getElementById('adhoc_interruptions')?.value) || 0;
    const adhocWorry = parseFloat(document.getElementById('adhoc_worry')?.value) || 0;
    const adhocTotal = adhocEvening + adhocWeekend + adhocInterruptions + adhocWorry;

    let strategic=0, delegatable=0, automatable=0, neutral=0;
    categories.forEach((c,i) => {
        if(c.type==='strategic') strategic += counts[i];
        else if(c.type==='delegatable') delegatable += counts[i];
        else if(c.type==='automatable') automatable += counts[i];
        else neutral += counts[i];
    });

    // Ad-hoc is mostly automatable/delegatable
    automatable += adhocInterruptions * 0.5;
    delegatable += adhocEvening + adhocWeekend + adhocInterruptions * 0.5 + adhocWorry;

    const total = strategic + delegatable + automatable + neutral + adhocTotal;

    // Live bar
    const bar = document.getElementById('liveBar');
    if(total > 0) {
        bar.innerHTML = `
            <div class="seg" style="width:${strategic/total*100}%;background:#22c55e">${strategic>0?strategic+'h':''}</div>
            <div class="seg" style="width:${delegatable/total*100}%;background:#eab308">${delegatable>0?Math.round(delegatable)+'h':''}</div>
            <div class="seg" style="width:${automatable/total*100}%;background:#ef4444">${automatable>0?Math.round(automatable)+'h':''}</div>
            <div class="seg" style="width:${neutral/total*100}%;background:#374151">${neutral>0?neutral+'h':''}</div>
        `;
    }

    // Live stats
    const calHours = Object.keys(grid).length;
    document.getElementById('liveStats').innerHTML = `
        <div class="stat"><div class="num">${calHours + adhocTotal}</div><div class="label">Total Hours</div></div>
        <div class="stat"><div class="num" style="color:#22c55e">${strategic}</div><div class="label">Strategic</div></div>
        <div class="stat"><div class="num" style="color:#eab308">${Math.round(delegatable)}</div><div class="label">Delegatable</div></div>
        <div class="stat"><div class="num" style="color:#ef4444">${Math.round(automatable)}</div><div class="label">Automatable</div></div>
    `;
}

function analyze() {
    const calHours = Object.keys(grid).length;
    const adhocEvening = parseFloat(document.getElementById('adhoc_evening').value) || 0;
    const adhocWeekend = parseFloat(document.getElementById('adhoc_weekend').value) || 0;
    const adhocInterruptions = parseFloat(document.getElementById('adhoc_interruptions').value) || 0;
    const adhocWorry = parseFloat(document.getElementById('adhoc_worry').value) || 0;

    if(calHours < 10) { alert('Please fill in more of your calendar (at least 10 hours).'); return; }

    // Count hours per category
    const catHours = {};
    categories.forEach((c,i) => catHours[i] = 0);
    Object.values(grid).forEach(ci => catHours[ci]++);

    // Build task breakdown
    let totalHrs = 0;
    let automatableHrs = 0;
    const breakdown = [];

    categories.forEach((c,i) => {
        let hrs = catHours[i] || 0;
        if(hrs === 0) return;
        const saved = hrs * c.save;
        automatableHrs += saved;
        totalHrs += hrs;
        breakdown.push({ ...c, hours: hrs, saved });
    });

    // Add ad hoc
    const adhocs = [
        { name:'Evening email/texts', hours:adhocEvening, save:0.6, type:'delegatable' },
        { name:'Weekend work', hours:adhocWeekend, save:0.4, type:'delegatable' },
        { name:'Unplanned interruptions', hours:adhocInterruptions, save:0.4, type:'automatable' },
        { name:'Worrying about work', hours:adhocWorry, save:0.3, type:'automatable' }
    ];
    adhocs.forEach(a => {
        if(a.hours > 0) {
            automatableHrs += a.hours * a.save;
            totalHrs += a.hours;
            breakdown.push({ name:a.name, hours:a.hours, saved:a.hours*a.save, type:a.type, color:'#6b7280' });
        }
    });

    // Show results
    document.getElementById('inputPage').style.display = 'none';
    document.getElementById('resultsPage').classList.add('active');

    document.getElementById('automatableHours').textContent = automatableHrs.toFixed(1);
    const yearlyHrs = Math.round(automatableHrs * 52);
    const yearlyDays = Math.round(yearlyHrs / 8);
    document.getElementById('reclaimedDays').textContent = yearlyDays;

    const pctAutomate = ((automatableHrs / totalHrs) * 100).toFixed(0);
    document.getElementById('impactContext').innerHTML = `<strong>${pctAutomate}%</strong> of your ${totalHrs}-hour work week is spent on tasks that don't need you. That's <strong>${yearlyHrs.toLocaleString()} hours per year</strong>.`;

    const dinners = Math.round(yearlyHrs / 2.5);
    const vacWeeks = (yearlyDays / 5).toFixed(1);
    const events = Math.round(yearlyHrs / 2);
    document.getElementById('reclaimGrid').innerHTML = `
        <div class="reclaim-item"><div class="number">${dinners}</div><div class="desc">Family dinners</div></div>
        <div class="reclaim-item"><div class="number">${vacWeeks}</div><div class="desc">Weeks of vacation</div></div>
        <div class="reclaim-item"><div class="number">${events}</div><div class="desc">Kids' events</div></div>
        <div class="reclaim-item"><div class="number">${yearlyHrs.toLocaleString()}</div><div class="desc">Hours for growth</div></div>
    `;

    // Before/After
    const bCol = document.getElementById('beforeCol');
    const aCol = document.getElementById('afterCol');
    bCol.innerHTML = '<h4>üî¥ Now</h4>';
    aCol.innerHTML = '<h4>üü¢ After</h4>';
    breakdown.sort((a,b) => b.hours - a.hours).forEach(t => {
        bCol.innerHTML += `<div class="ba-stat"><span>${t.name}</span><span class="val">${t.hours}h</span></div>`;
        const after = (t.hours - t.saved).toFixed(1);
        aCol.innerHTML += `<div class="ba-stat"><span>${t.name}</span><span class="val" style="color:${t.saved>0?'#22c55e':'inherit'}">${after}h</span></div>`;
    });
    bCol.innerHTML += `<div class="ba-stat" style="border-top:2px solid var(--border);margin-top:0.4rem;padding-top:0.4rem"><span><strong>Total</strong></span><span class="val">${totalHrs}h</span></div>`;
    aCol.innerHTML += `<div class="ba-stat" style="border-top:2px solid var(--border);margin-top:0.4rem;padding-top:0.4rem"><span><strong>Total</strong></span><span class="val" style="color:#22c55e">${(totalHrs - automatableHrs).toFixed(1)}h</span></div>`;

    window._data = { totalHrs, automatableHrs, yearlyHrs, yearlyDays, breakdown, dinners, vacWeeks, events };
}

function handleDownload(e) {
    e.preventDefault();
    const email = document.getElementById('userEmail').value;
    const leads = JSON.parse(localStorage.getItem('timeaudit_leads') || '[]');
    leads.push({ email, timestamp: new Date().toISOString(), data: window._data });
    localStorage.setItem('timeaudit_leads', JSON.stringify(leads));
    generatePDF(email);
    document.getElementById('emailForm').style.display = 'none';
    document.getElementById('downloadComplete').classList.add('active');
}

function generatePDF(email) {
    const d = window._data;
    const doc = new jsPDF();
    const pw = doc.internal.pageSize.getWidth();
    const ph = doc.internal.pageSize.getHeight();
    const m = 20, cw = pw - 2*m;
    let y = 0;
    let pageNum = 0;

    // Design system - Material Design
    const C = {
        bg: [241, 243, 244], card: [255, 255, 255], border: [218, 220, 224],
        text: [32, 33, 36], textMid: [95, 99, 104], textLight: [128, 134, 139],
        white: [255, 255, 255], shadow: [232, 234, 237],
        blue: [26, 115, 232], red: [217, 48, 37], yellow: [249, 171, 0], 
        green: [30, 142, 62], purple: [161, 66, 244], amber: [210, 145, 30]
    };

    const txt = (t,sz,st='normal',c=C.text) => { doc.setFontSize(sz); doc.setFont('helvetica',st); doc.setTextColor(...c); };
    const fill = (c) => doc.setFillColor(...c);
    const stroke = (c) => doc.setDrawColor(...c);
    
    const cp = (n=25) => { if(y+n>265){newPage(); return true;} return false; };

    const newPage = () => {
        doc.addPage(); pageNum++;
        fill(C.bg); doc.rect(0,0,pw,ph,'F');
        // Top accent
        fill(C.amber); doc.rect(0,0,pw,1.5,'F');
        y = 20;
    };

    // Material Card with subtle shadow and border
    const card = (x,yc,w,h,opts={}) => {
        const r = opts.radius || 2;
        // Shadow (simulated with offset rect)
        fill(C.shadow); doc.roundedRect(x+0.5,yc+0.5,w,h,r,r,'F');
        // Border
        stroke(C.border); doc.setLineWidth(0.2);
        // Card BG
        fill(C.card); doc.roundedRect(x,yc,w,h,r,r,'FD');
        // Optional accent sidebar
        if(opts.accent) { fill(opts.accent); doc.roundedRect(x,yc,3,h,r,0,'F'); doc.rect(x+1.5,yc,1.5,h,'F'); }
    };

    // Section header
    const secTitle = (title,yy,color=C.amber) => {
        txt(title,12,'bold',C.text); doc.text(title,m,yy+7);
        fill(color); doc.rect(m,yy+10,25,1.5,'F');
        return yy+18;
    };

    const totalHrs = d.breakdown.reduce((s,t) => s+t.hours,0);
    const strategicHrs = d.breakdown.filter(t=>t.type==='strategic').reduce((s,t)=>s+t.hours,0);
    const strategicPct = totalHrs > 0 ? Math.round((strategicHrs/totalHrs)*100) : 0;
    const afterTotal = totalHrs - d.automatableHrs;
    const sorted = [...d.breakdown].filter(t=>t.hours>0).sort((a,b)=>b.saved-a.saved);
    const maxHrs = Math.max(...sorted.map(t=>t.hours));

    // =============================
    // PAGE 1: COVER
    // =============================
    fill(C.bg); doc.rect(0,0,pw,ph,'F');

    // Hero Section
    fill(C.card); stroke(C.border); doc.roundedRect(0,-10,pw,95,0,0,'FD');
    fill(C.amber); doc.circle(pw/2,22,8,'F');
    txt('A',12,'bold',C.white); doc.text('A',pw/2,25.5,{align:'center'});

    txt('CEO TIME AUDIT',24,'bold',C.text); doc.text('CEO TIME AUDIT',pw/2,48,{align:'center'});
    txt('Your Personalized Time Recovery Analysis',11,'normal',C.textMid); doc.text('Your Personalized Time Recovery Analysis',pw/2,58,{align:'center'});

    // Info Pill
    fill(C.bg); doc.roundedRect(pw/2-50,68,100,10,5,5,'F');
    txt(new Date().toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'}),8,'bold',C.textMid);
    doc.text(new Date().toLocaleDateString('en-US',{month:'long',day:'numeric',year:'numeric'}),pw/2,74.5,{align:'center'});

    y = 105;

    // Key metrics row
    const metricW = (cw-10)/3;
    const mets = [
        { val: d.automatableHrs.toFixed(1)+'h', label:'RECOVERABLE', sub:'per week', color:C.red },
        { val: d.yearlyDays.toString(), label:'DAYS/YEAR', sub:'returned', color:C.amber },
        { val: d.dinners.toString(), label:'DINNERS', sub:'reclaimed', color:C.green }
    ];
    mets.forEach((mt,i) => {
        const x = m + i*(metricW+5);
        card(x,y,metricW,38,{accent:mt.color});
        txt(mt.val,22,'bold',mt.color); doc.text(mt.val,x+metricW/2,y+18,{align:'center'});
        txt(mt.label,8,'bold',C.text); doc.text(mt.label,x+metricW/2,y+27,{align:'center'});
        txt(mt.sub,7,'normal',C.textLight); doc.text(mt.sub,x+metricW/2,y+33,{align:'center'});
    });
    y += 55;

    // Summary Card
    card(m,y,cw,45);
    txt('EXECUTIVE SUMMARY',9,'bold',C.amber); doc.text('EXECUTIVE SUMMARY',m+10,y+12);
    
    const sumLines = [
        `You reported ${totalHrs} hours/week across ${d.breakdown.filter(t=>t.hours>0).length} task categories.`,
        `${d.automatableHrs.toFixed(1)} hours (${Math.round(d.automatableHrs/totalHrs*100)}%) can be automated or delegated.`,
        `Current state: only ${strategicPct}% of your time is spent on high-leverage strategic work.`
    ];
    let sY = y + 22;
    sumLines.forEach(l => {
        txt(l,10,'normal',C.text);
        doc.text(l,m+10,sY);
        sY += 7;
    });
    y = sY + 15;

    // =============================
    // PAGE 2: ANALYSIS
    // =============================
    newPage();
    y = secTitle('TIME ALLOCATION ANALYSIS', y);

    card(m,y,cw, sorted.length*14 + 15);
    let bY = y + 12;
    sorted.forEach(t => {
        const typeCol = t.type==='strategic'?C.green:t.type==='delegatable'?C.amber:C.red;
        fill(typeCol); doc.circle(m+8,bY+2,2,'F');
        txt(t.name,9,'bold',C.text); doc.text(t.name,m+14,bY+4.5);
        
        const barX = m+70, barW = cw-90;
        const curW = (t.hours/maxHrs)*barW;
        const aftW = ((t.hours-t.saved)/maxHrs)*barW;
        
        fill(C.bg); doc.roundedRect(barX,bY,barW,5,1.5,1.5,'F');
        fill(typeCol); doc.roundedRect(barX,bY,Math.max(aftW,1),5,1.5,1.5,'F');
        
        txt(t.hours+'h',7,'bold',C.textMid); doc.text(t.hours+'h',barX+curW+3,bY+4);
        if(t.saved>0){
            txt('-'+t.saved.toFixed(1),7,'bold',C.red); doc.text('-'+t.saved.toFixed(1),pw-m-5,bY+4,{align:'right'});
        }
        bY += 14;
    });
    y = bY + 15;

    // Breakdown side-by-side
    cp(60);
    const hw = (cw-6)/2;
    // Left: Category
    card(m,y,hw,50);
    txt('TIME BY CATEGORY',8,'bold',C.textMid); doc.text('TIME BY CATEGORY',m+10,y+12);
    const cats = [
        { label:'Strategic', color:C.green, hrs: d.breakdown.filter(t=>t.type==='strategic').reduce((s,t)=>s+t.hours,0) },
        { label:'Delegatable', color:C.amber, hrs: d.breakdown.filter(t=>t.type==='delegatable').reduce((s,t)=>s+t.hours,0) },
        { label:'Automatable', color:C.red, hrs: d.breakdown.filter(t=>t.type==='automatable').reduce((s,t)=>s+t.hours,0) }
    ];
    let cY = y+22;
    cats.forEach(c => {
        if(c.hrs<=0) return;
        const p = Math.round(c.hrs/totalHrs*100);
        fill(c.color); doc.circle(m+12,cY,2,'F');
        txt(`${c.label}: ${c.hrs}h (${p}%)`,9,'normal',C.text); doc.text(`${c.label}: ${c.hrs}h (${p}%)`,m+18,cY+2.5);
        cY += 9;
    });

    // Right: Impact
    card(m+hw+6,y,hw,50);
    txt('WEEKLY IMPACT',8,'bold',C.textMid); doc.text('WEEKLY IMPACT',m+hw+16,y+12);
    fill(C.red); doc.circle(m+hw+hw/2+3, y+32, 12, 'F');
    txt(totalHrs.toString(),14,'bold',C.white); doc.text(totalHrs.toString(),m+hw+hw/2+3,y+36,{align:'center'});
    txt('NOW',7,'bold',C.red); doc.text('NOW',m+hw+hw/2+3,y+48,{align:'center'});
    
    txt('>',14,'bold',C.textLight); doc.text('>',m+hw+6,y+36);

    fill(C.green); doc.circle(m+hw+hw-15, y+32, 12, 'F');
    txt(afterTotal.toFixed(0),14,'bold',C.white); doc.text(afterTotal.toFixed(0),m+hw+hw-15,y+36,{align:'center'});
    txt('GOAL',7,'bold',C.green); doc.text('GOAL',m+hw+hw-15,y+48,{align:'center'});
    
    y += 70;

    // =============================
    // PAGE 3: PLAYBOOK
    // =============================
    newPage();
    y = secTitle('AUTOMATION PLAYBOOK', y);

    const guides = {
        'Pricing & Quotes': { solution:'Rule-based pricing engine', impact:'Reduces quoting time by 70%.', steps:['Audit last 90 days of quotes.','Create pricing matrix by tier/category.','Automate approval workflows in ERP.','Train team on rules.'] },
        'Order Issues': { solution:'Order validation system', impact:'Reduces errors by 80%.', steps:['Identify top 3 error patterns.','Build automated validation rules.','Create customer self-service portal.','Automate confirmation emails.'] },
        'Inventory/Purchasing': { solution:'Demand forecasting tools', impact:'Cuts excess stock 20-30%.', steps:['Run ABC inventory analysis.','Set automated reorder points.','Liquidate dead stock.','Implement cycle counting.'] },
        'Reports & Data': { solution:'Automated dashboards', impact:'Eliminates manual compiling.', steps:['List all weekly reports.','Build automated BI dashboards.','Schedule auto-email delivery.','Stop manual copy-pasting.'] },
        'Admin & Paperwork': { solution:'Digital workflows', impact:'Cuts overhead by 50%.', steps:['Map all approval chains.','Set tiered authority levels.','Implement e-signatures.','Automate AP/AR flows.'] },
        'Putting Out Fires': { solution:'Early warning system', impact:'Reduces reactive stress.', steps:['Log fires for 5 days.','Write response playbooks.','Set proactive data alerts.','Empower team leads.'] },
        'Email & Comms': { solution:'Inbox management system', impact:'Saves 2 hours daily.', steps:['Turn off notifications.','Create canned templates.','Set 3x daily batch check.','Delegate routine replies.'] },
        'Internal Meetings': { solution:'Async-first communication', impact:'Recovers 40% of time.', steps:['Audit all recurring meetings.','Convert status to dashboards.','Enforce 25-min defaults.','Require agendas 24h prior.'] }
    };

    sorted.filter(t=>t.saved>=0.5).slice(0,5).forEach((t,idx) => {
        const g = guides[t.name] || { solution:'Process automation', impact:'Efficiency gain', steps:['Audit current steps.','Document the SOP.','Apply automation tools.','Train the team.'] };
        cp(85);
        card(m,y,cw,75,{accent:C.blue});
        txt(`${idx+1}. ${t.name.toUpperCase()}`,10,'bold',C.blue); doc.text(`${idx+1}. ${t.name.toUpperCase()}`,m+10,y+12);
        txt(`Recovery Potential: ${t.saved.toFixed(1)}h/week`,8,'bold',C.textMid); doc.text(`Recovery Potential: ${t.saved.toFixed(1)}h/week`,pw-m-10,y+12,{align:'right'});
        
        txt('SOLUTION:',8,'bold',C.text); doc.text('SOLUTION:',m+10,y+24);
        txt(g.solution,9,'normal',C.text); doc.text(g.solution,m+32,y+24);
        
        txt('IMPACT:',8,'bold',C.text); doc.text('IMPACT:',m+10,y+31);
        txt(g.impact,9,'normal',C.textMid); doc.text(g.impact,m+32,y+31);

        let sY = y+42;
        g.steps.forEach((s,si) => {
            fill(C.blue); doc.circle(m+12,sY,1, 'F');
            txt(s,8.5,'normal',C.text); doc.text(s,m+16,sY+2);
            sY += 7;
        });
        y += 90;
    });

    // =============================
    // PAGE 4: ROADMAP + CTA
    // =============================
    newPage();
    y = secTitle('90-DAY IMPLEMENTATION ROADMAP', y);
    
    const phases = [
        { t:'DAYS 1-14: QUICK WINS', c:C.green, items:['Turn off notifications.','Batch email 3x daily.','Delegate all approvals <$500.'] },
        { t:'DAYS 15-30: FOUNDATIONS', c:C.amber, items:['Build system for top time drain.','Create escalation matrix.','Set up KPI dashboards.'] },
        { t:'DAYS 31-60: AUTOMATION', c:C.blue, items:['Configure ERP automation.','Launch customer portal.','Deploy proactive alerts.'] },
        { t:'DAYS 61-90: OPTIMIZATION', c:C.purple, items:['Review all time KPIs.','Reallocate time to growth.','Schedule next audit.'] }
    ];

    phases.forEach((p,pi) => {
        cp(45);
        fill(p.c); doc.roundedRect(m,y,cw,10,2,2,'F');
        txt(p.t,9,'bold',C.white); doc.text(p.t,m+cw/2,y+7,{align:'center'});
        y += 15;
        p.items.forEach(it => {
            fill(p.c); doc.circle(m+5,y+2,1,'F');
            txt(it,9,'normal',C.text); doc.text(it,m+10,y+4);
            y += 8;
        });
        y += 5;
    });

    // CTA - GOOGLE STYLE (White bg, colored border)
    y += 20;
    cp(60);
    stroke(C.amber); doc.setLineWidth(1);
    fill(C.white); doc.roundedRect(m,y,cw,45,3,3,'FD');
    
    txt("LET'S RECLAIM YOUR TIME",14,'bold',C.text); doc.text("LET'S RECLAIM YOUR TIME",pw/2,y+15,{align:'center'});
    txt(`You are losing ${d.automatableHrs.toFixed(0)} hours every single week. That ends now.`,9,'normal',C.textMid);
    doc.text(`You are losing ${d.automatableHrs.toFixed(0)} hours every single week. That ends now.`,pw/2,y+24,{align:'center'});
    
    txt('mo@deeplineop.ai',12,'bold',C.amber); doc.text('mo@deeplineop.ai',pw/2,y+36,{align:'center'});

    // Footer
    const pc = doc.internal.getNumberOfPages();
    for(let i=1;i<=pc;i++){
        doc.setPage(i);
        fill(C.white); stroke(C.border); doc.rect(0,ph-12,pw,12,'FD');
        txt('Deep Line Operations | AI Automation for Distributors',7,'normal',C.textMid);
        doc.text('Deep Line Operations | AI Automation for Distributors',m,ph-5);
        txt(`Page ${i} of ${pc}`,7,'normal',C.textMid);
        doc.text(`Page ${i} of ${pc}`,pw-m,ph-5,{align:'right'});
    }

    doc.save('CEO-Time-Audit-Report.pdf');
}

init();
</script>
<!-- Navigation Menu -->
<div id="nav-menu" style="position:fixed; top:20px; right:20px; z-index:10000; font-family:sans-serif;">
    <button id="nav-toggle" style="background:#12121a; border:1px solid #2a2a3a; color:#f1f5f9; padding:8px 16px; border-radius:8px; cursor:pointer; font-weight:600; display:flex; align-items:center; gap:8px; box-shadow:0 4px 12px rgba(0,0,0,0.5); font-size:14px;">
        <span style="font-size:18px;">?</span> Tools
    </button>
    <div id="nav-content" style="display:none; position:absolute; top:45px; right:0; background:#12121a; border:1px solid #2a2a3a; border-radius:12px; width:260px; padding:8px; box-shadow:0 8px 24px rgba(0,0,0,0.7); overflow:hidden;">
        <a href="index.html" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#f1f5f9; text-decoration:none; border-radius:6px; font-size:14px; transition:background 0.2s; margin-bottom:4px; border-left:3px solid #6366f1; background:rgba(99,102,241,0.05);">
            <span style="font-size:16px;">??</span> <strong>Home (Tools Hub)</strong>
        </a>
        <div style="height:1px; background:#2a2a3a; margin:6px 4px;"></div>
        <a href="ai-readiness-scorecard.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">??</span> AI Readiness Scorecard
        </a>
        <a href="profit-leak-diagnostic.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">??</span> Profit Leak Diagnostic
        </a>
        <a href="ceo-time-audit.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">?</span> CEO Time Audit
        </a>
        <a href="business-dependency.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">??</span> Business Dependency
        </a>
        <a href="rfq-parser.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">??</span> RFQ Parser (AI Demo)
        </a>
        <a href="reorder-calculator.html" class="nav-link" style="display:flex; align-items:center; gap:10px; padding:10px 12px; color:#94a3b8; text-decoration:none; border-radius:6px; font-size:13.5px; transition:all 0.2s;">
            <span style="font-size:16px;">??</span> Reorder Calculator
        </a>
    </div>
</div>
<script>
    (function(){
        const toggle = document.getElementById('nav-toggle');
        const content = document.getElementById('nav-content');
        if(!toggle || !content) return;
        
        toggle.addEventListener('click', (e) => {
            e.stopPropagation();
            const isVisible = content.style.display === 'block';
            content.style.display = isVisible ? 'none' : 'block';
            toggle.style.background = isVisible ? '#12121a' : '#1a1a25';
        });
        
        document.addEventListener('click', () => {
            content.style.display = 'none';
            toggle.style.background = '#12121a';
        });
        
        content.addEventListener('click', (e) => e.stopPropagation());
        
        // Hover effects
        const links = document.querySelectorAll('.nav-link');
        links.forEach(l => {
            l.addEventListener('mouseenter', () => {
                l.style.background = 'rgba(255,255,255,0.05)';
                l.style.color = '#f1f5f9';
            });
            l.addEventListener('mouseleave', () => {
                if(!l.classList.contains('active-page')) {
                    l.style.background = 'transparent';
                    l.style.color = '#94a3b8';
                }
            });
        });
        
        // Highlight current page
        const currentPath = window.location.pathname.split('/').pop() || 'index.html';
        document.querySelectorAll('#nav-content a').forEach(a => {
            const href = a.getAttribute('href');
            if(href === currentPath || (currentPath === '' && href === 'index.html')) {
                a.classList.add('active-page');
                a.style.background = 'rgba(255,255,255,0.1)';
                a.style.color = '#fff';
                a.style.fontWeight = '600';
            }
        });
    })();
</script>
</body>
</html>
